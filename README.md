# Anki Editor

ä¸€ä¸ªåŸºäº Vue3 + Vite + Element Plus çš„è‡ªå®šä¹‰ Anki å®¢æˆ·ç«¯ï¼Œä¸“æ³¨äºå¡ç‰‡å­—æ®µå†…å®¹çš„ä¿®æ”¹å’Œå¡ç‰‡æ•´ä½“æ•ˆæœçš„é¢„è§ˆã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **ç‰Œç»„ç®¡ç†**: è¿æ¥ AnkiConnectï¼Œæµè§ˆå’Œç®¡ç†ç‰Œç»„
- ğŸ“ **å­—æ®µç¼–è¾‘**: å®æ—¶ç¼–è¾‘å¡ç‰‡å­—æ®µå†…å®¹ï¼Œæ”¯æŒæ–‡æœ¬å’Œ HTML æ ¼å¼
- ğŸ‘€ **å¡ç‰‡é¢„è§ˆ**: å®æ—¶é¢„è§ˆå¡ç‰‡æ•ˆæœï¼Œæ”¯æŒæ­£é¢ã€èƒŒé¢å’Œå®Œæ•´æ¨¡å¼
- ğŸ”„ **å¡ç‰‡å¯¼èˆª**: åœ¨å¡ç‰‡é—´å¿«é€Ÿåˆ‡æ¢ï¼Œæ”¯æŒä¸Šä¸€å¼ /ä¸‹ä¸€å¼ åŠŸèƒ½
- ğŸ§ª **API æµ‹è¯•**: å†…ç½® AnkiConnect API æµ‹è¯•å·¥å…·ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œå¼€å‘
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œæ”¯æŒä¾§è¾¹æ æŠ˜å 

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Vue 3 (Composition API)
- **æ„å»ºå·¥å…·**: Vite
- **UI ç»„ä»¶åº“**: Element Plus
- **API æ¥å£**: AnkiConnect
- **å¼€å‘è¯­è¨€**: JavaScript

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+ 
- Anki æ¡Œé¢ç‰ˆ
- AnkiConnect æ’ä»¶

### å®‰è£… AnkiConnect

1. æ‰“å¼€ Anki
2. è¿›å…¥ `å·¥å…·` > `é™„åŠ ç»„ä»¶`
3. ç‚¹å‡» `è·å–é™„åŠ ç»„ä»¶`
4. è¾“å…¥ä»£ç : `2055492159`
5. é‡å¯ Anki

### é¡¹ç›®è®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd anki-editor

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### è¿æ¥ Anki

1. ç¡®ä¿ Anki å·²å¯åŠ¨
2. ç¡®ä¿å·²å®‰è£… AnkiConnect æ’ä»¶
3. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`
4. åœ¨"ç‰Œç»„ç®¡ç†"é¡µé¢æµ‹è¯•è¿æ¥

## åŠŸèƒ½è¯´æ˜

### ç‰Œç»„ç®¡ç†
- æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨ç‰Œç»„
- æµ‹è¯• AnkiConnect è¿æ¥çŠ¶æ€
- é€‰æ‹©è¦ç¼–è¾‘çš„ç‰Œç»„

### å¡ç‰‡åˆ—è¡¨
- æ˜¾ç¤ºé€‰å®šç‰Œç»„ä¸­çš„æ‰€æœ‰å¡ç‰‡
- æ”¯æŒæœç´¢å’Œåˆ†é¡µ
- ç‚¹å‡»å¡ç‰‡è¿›å…¥ç¼–è¾‘æ¨¡å¼

### å­—æ®µç¼–è¾‘
- å®æ—¶ç¼–è¾‘å¡ç‰‡å­—æ®µå†…å®¹
- æ”¯æŒæ–‡æœ¬å’Œ HTML æ ¼å¼
- å·¦å³åˆ†æ å¸ƒå±€ï¼š2/3 ç¼–è¾‘åŒºåŸŸï¼Œ1/3 é¢„è§ˆåŒºåŸŸ
- å¡ç‰‡å¯¼èˆªï¼šä¸Šä¸€å¼ /ä¸‹ä¸€å¼ 
- è‡ªåŠ¨ä¿å­˜æç¤º

### å¡ç‰‡é¢„è§ˆ
- å®æ—¶é¢„è§ˆå¡ç‰‡æ•ˆæœ
- æ”¯æŒæ­£é¢ã€èƒŒé¢ã€å®Œæ•´ä¸‰ç§æ¨¡å¼
- ä¸ç¼–è¾‘ç•Œé¢åŒæ­¥æ˜¾ç¤º

### API æµ‹è¯•å·¥å…·

#### åŠŸèƒ½æ¦‚è¿°
API æµ‹è¯•å·¥å…·æ˜¯ä¸€ä¸ªå†…ç½®çš„ AnkiConnect API è°ƒè¯•ç•Œé¢ï¼Œæä¾›äº†å®Œæ•´çš„ API æµ‹è¯•å’Œè°ƒè¯•åŠŸèƒ½ã€‚

#### æ ¸å¿ƒç‰¹æ€§

**1. è¿æ¥çŠ¶æ€ç®¡ç†**
- å®æ—¶æ£€æµ‹ AnkiConnect è¿æ¥çŠ¶æ€
- è‡ªåŠ¨é‡è¿æœºåˆ¶
- è¿æ¥çŠ¶æ€å¯è§†åŒ–æ˜¾ç¤º
- è¿æ¥å¸®åŠ©ä¿¡æ¯

**2. API æ–¹æ³•é€‰æ‹©**
- æ”¯æŒ 9 ä¸ªå¸¸ç”¨ AnkiConnect API
- åŠ¨æ€å‚æ•°é…ç½®è¡¨å•
- API ä¿¡æ¯è¯¦ç»†è¯´æ˜
- æ™ºèƒ½å‚æ•°ç±»å‹è¯†åˆ«

**3. é¢„è®¾æµ‹è¯•ç”¨ä¾‹**
- å¿«é€Ÿæµ‹è¯•å¸¸ç”¨ API
- ä¸€é”®åŠ è½½é¢„è®¾å‚æ•°
- å¸¸ç”¨åœºæ™¯è¦†ç›–

**4. è¯·æ±‚/å“åº”æ˜¾ç¤º**
- JSON æ ¼å¼ç¾åŒ–æ˜¾ç¤º
- è¯·æ±‚å’Œå“åº”æ•°æ®åˆ†æ 
- å®æ—¶æ•°æ®æ›´æ–°
- é”™è¯¯ä¿¡æ¯è¯¦ç»†å±•ç¤º

**5. æµ‹è¯•å†å²è®°å½•**
- è‡ªåŠ¨ä¿å­˜æµ‹è¯•è®°å½•
- æ”¯æŒé‡æ–°åŠ è½½å†å²
- çŠ¶æ€æ ‡ç­¾æ˜¾ç¤º
- æ—¶é—´æˆ³è®°å½•

#### æ”¯æŒçš„ API æ–¹æ³•

| API æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°ç±»å‹ |
|---------|---------|---------|
| `version` | è·å– AnkiConnect ç‰ˆæœ¬ä¿¡æ¯ | æ— å‚æ•° |
| `deckNames` | è·å–æ‰€æœ‰ç‰Œç»„åç§° | æ— å‚æ•° |
| `getDeckConfig` | è·å–æŒ‡å®šç‰Œç»„é…ç½® | å­—ç¬¦ä¸²å‚æ•° |
| `findCards` | æ ¹æ®æŸ¥è¯¢æ¡ä»¶æŸ¥æ‰¾å¡ç‰‡ | å­—ç¬¦ä¸²å‚æ•° |
| `cardsInfo` | è·å–æŒ‡å®šå¡ç‰‡è¯¦ç»†ä¿¡æ¯ | JSON æ•°ç»„å‚æ•° |
| `updateNoteFields` | æ›´æ–°ç¬”è®°å­—æ®µå†…å®¹ | JSON å¯¹è±¡å‚æ•° |
| `getModelNames` | è·å–æ‰€æœ‰ç¬”è®°ç±»å‹åç§° | æ— å‚æ•° |
| `getCollectionStats` | è·å–é›†åˆç»Ÿè®¡ä¿¡æ¯ | æ— å‚æ•° |
| `sync` | åŒæ­¥ Anki é›†åˆ | æ— å‚æ•° |

#### å‚æ•°ç±»å‹æ”¯æŒ

**å­—ç¬¦ä¸²å‚æ•°**
```javascript
{
  name: 'deck',
  type: 'string',
  description: 'ç‰Œç»„åç§°'
}
```

**æ•°å­—å‚æ•°**
```javascript
{
  name: 'limit',
  type: 'number',
  description: 'é™åˆ¶æ•°é‡'
}
```

**é€‰æ‹©å‚æ•°**
```javascript
{
  name: 'includeSched',
  type: 'select',
  description: 'æ˜¯å¦åŒ…å«å­¦ä¹ è¿›åº¦',
  options: [
    { label: 'æ˜¯', value: true },
    { label: 'å¦', value: false }
  ]
}
```

**æ–‡æœ¬åŸŸå‚æ•°**
```javascript
{
  name: 'note',
  type: 'textarea',
  description: 'ç¬”è®°å¯¹è±¡ï¼ŒJSONæ ¼å¼'
}
```

#### é¢„è®¾æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•ç”¨ä¾‹ | API æ–¹æ³• | æè¿° |
|---------|---------|------|
| è·å–ç‰ˆæœ¬ | `version` | éªŒè¯ AnkiConnect è¿æ¥ |
| è·å–ç‰Œç»„åˆ—è¡¨ | `deckNames` | è·å–æ‰€æœ‰å¯ç”¨ç‰Œç»„ |
| è·å–æ¨¡å‹åç§° | `getModelNames` | è·å–ç¬”è®°ç±»å‹åˆ—è¡¨ |
| è·å–é›†åˆç»Ÿè®¡ | `getCollectionStats` | æŸ¥çœ‹é›†åˆç»Ÿè®¡ä¿¡æ¯ |
| åŒæ­¥ | `sync` | åŒæ­¥ Anki æ•°æ® |

#### é”™è¯¯å¤„ç†æœºåˆ¶

**ç½‘ç»œé”™è¯¯**
- è¿æ¥è¶…æ—¶å¤„ç†
- ç½‘ç»œå¼‚å¸¸æç¤º
- è‡ªåŠ¨é‡è¯•æœºåˆ¶

**API é”™è¯¯**
- è¯¦ç»†é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- é”™è¯¯åˆ†ç±»å¤„ç†
- ç”¨æˆ·å‹å¥½æç¤º

**å‚æ•°é”™è¯¯**
- å‚æ•°éªŒè¯
- æ ¼å¼æ£€æŸ¥
- å®æ—¶é”™è¯¯æç¤º

#### ä½¿ç”¨æµç¨‹

1. **å¯åŠ¨åº”ç”¨**
   ```bash
   npm run dev
   ```

2. **è®¿é—® API æµ‹è¯•é¡µé¢**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3001`
   - ç‚¹å‡»ä¾§è¾¹æ "API æµ‹è¯•"èœå•

3. **æµ‹è¯•è¿æ¥**
   - æŸ¥çœ‹è¿æ¥çŠ¶æ€
   - ç‚¹å‡»"é‡æ–°æ£€æŸ¥è¿æ¥"æŒ‰é’®
   - ç¡®è®¤ AnkiConnect æ­£å¸¸å·¥ä½œ

4. **é€‰æ‹© API æ–¹æ³•**
   - ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©è¦æµ‹è¯•çš„ API
   - æŸ¥çœ‹ API æè¿°å’Œå‚æ•°è¦æ±‚
   - é…ç½®å¿…è¦å‚æ•°

5. **å‘é€è¯·æ±‚**
   - ç‚¹å‡»"å‘é€è¯·æ±‚"æŒ‰é’®
   - æŸ¥çœ‹è¯·æ±‚å’Œå“åº”æ•°æ®
   - åˆ†ææµ‹è¯•ç»“æœ

6. **ä½¿ç”¨é¢„è®¾æµ‹è¯•**
   - ç‚¹å‡»é¢„è®¾æµ‹è¯•æŒ‰é’®
   - å¿«é€ŸéªŒè¯å¸¸ç”¨ API
   - æ£€æŸ¥è¿æ¥çŠ¶æ€

#### æŠ€æœ¯å®ç°

**ç»„ä»¶ç»“æ„**
```
ApiTester.vue
â”œâ”€â”€ è¿æ¥çŠ¶æ€æ£€æµ‹
â”œâ”€â”€ API é€‰æ‹©å™¨
â”œâ”€â”€ å‚æ•°é…ç½®è¡¨å•
â”œâ”€â”€ è¯·æ±‚/å“åº”æ˜¾ç¤º
â”œâ”€â”€ æµ‹è¯•å†å²è®°å½•
â””â”€â”€ é¢„è®¾æµ‹è¯•ç”¨ä¾‹
```

**æ ¸å¿ƒæ–¹æ³•**
```javascript
// æ£€æŸ¥è¿æ¥çŠ¶æ€
const checkConnectionStatus = async () => {
  // å®ç°è¿æ¥æ£€æµ‹é€»è¾‘
}

// å‘é€ API è¯·æ±‚
const sendRequest = async () => {
  // å®ç°è¯·æ±‚å‘é€é€»è¾‘
}

// åŠ è½½é¢„è®¾æµ‹è¯•
const loadPreset = (preset) => {
  // å®ç°é¢„è®¾åŠ è½½é€»è¾‘
}
```

**çŠ¶æ€ç®¡ç†**
```javascript
// è¿æ¥çŠ¶æ€
const connectionStatus = reactive({
  connected: false,
  error: null,
  version: null
})

// API é€‰æ‹©çŠ¶æ€
const selectedApi = ref('')
const requestParams = reactive({})

// è¯·æ±‚çŠ¶æ€
const loading = ref(false)
const requestData = ref('')
const responseData = ref('')

// å†å²è®°å½•
const history = ref([])
```

#### å¼€å‘æŒ‡å—

**æ·»åŠ æ–°çš„ API æ–¹æ³•**

1. åœ¨ `apiList` æ•°ç»„ä¸­æ·»åŠ æ–°é¡¹ï¼š
```javascript
{
  action: 'newApi',
  label: 'æ–° API æ–¹æ³•',
  description: 'API åŠŸèƒ½æè¿°',
  parameters: [
    {
      name: 'param1',
      type: 'string',
      description: 'å‚æ•°æè¿°'
    }
  ]
}
```

2. åœ¨ `presetTests` ä¸­æ·»åŠ é¢„è®¾ï¼ˆå¦‚é€‚ç”¨ï¼‰ï¼š
```javascript
{ name: 'æµ‹è¯•æ–° API', action: 'newApi', params: {} }
```

**è‡ªå®šä¹‰å‚æ•°ç±»å‹**

1. åœ¨å‚æ•°é…ç½®ä¸­æ·»åŠ æ–°çš„ç±»å‹æ”¯æŒ
2. åœ¨æ¨¡æ¿ä¸­æ·»åŠ å¯¹åº”çš„è¡¨å•ç»„ä»¶
3. å®ç°å‚æ•°éªŒè¯é€»è¾‘

**æ‰©å±•é”™è¯¯å¤„ç†**

1. æ·»åŠ æ–°çš„é”™è¯¯ç±»å‹
2. å®ç°è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘
3. æ›´æ–°ç”¨æˆ·æç¤ºä¿¡æ¯

#### æœ€ä½³å®è·µ

**API æµ‹è¯•æµç¨‹**
1. å…ˆä½¿ç”¨é¢„è®¾æµ‹è¯•éªŒè¯è¿æ¥
2. æµ‹è¯•æ— å‚æ•° API æ–¹æ³•
3. é€æ­¥æµ‹è¯•å¸¦å‚æ•°çš„ API
4. è®°å½•æˆåŠŸçš„æµ‹è¯•ç”¨ä¾‹

**é”™è¯¯æ’æŸ¥**
1. æ£€æŸ¥ Anki æ˜¯å¦å¯åŠ¨
2. ç¡®è®¤ AnkiConnect æ’ä»¶å·²å®‰è£…
3. éªŒè¯æ’ä»¶ç‰ˆæœ¬å…¼å®¹æ€§
4. æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€

**æ€§èƒ½ä¼˜åŒ–**
1. é¿å…é¢‘ç¹çš„ API è°ƒç”¨
2. åˆç†ä½¿ç”¨é¢„è®¾æµ‹è¯•
3. åŠæ—¶æ¸…ç†å†å²è®°å½•
4. ç›‘æ§è¿æ¥çŠ¶æ€å˜åŒ–

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ Header.vue      # åº”ç”¨å¤´éƒ¨
â”‚   â”œâ”€â”€ Sidebar.vue     # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”œâ”€â”€ DeckManager.vue # ç‰Œç»„ç®¡ç†
â”‚   â”œâ”€â”€ CardList.vue    # å¡ç‰‡åˆ—è¡¨
â”‚   â”œâ”€â”€ FieldEditor.vue # å­—æ®µç¼–è¾‘
â”‚   â”œâ”€â”€ Preview.vue     # å¡ç‰‡é¢„è§ˆ
â”‚   â”œâ”€â”€ Settings.vue    # è®¾ç½®é¡µé¢
â”‚   â””â”€â”€ ApiTester.vue   # API æµ‹è¯•å·¥å…·
â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â””â”€â”€ ankiConnect.js  # AnkiConnect API å°è£…
â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â””â”€â”€ main.js           # åº”ç”¨å…¥å£
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/components/` åˆ›å»ºæ–°ç»„ä»¶
2. åœ¨ `src/App.vue` ä¸­æ³¨å†Œç»„ä»¶
3. åœ¨ `src/components/Sidebar.vue` æ·»åŠ èœå•é¡¹
4. æ›´æ–°è·¯ç”±é€»è¾‘

### API å¼€å‘

ä½¿ç”¨å†…ç½®çš„ API æµ‹è¯•å·¥å…·è¿›è¡Œå¼€å‘å’Œè°ƒè¯•ï¼š

1. è¿›å…¥"API æµ‹è¯•"é¡µé¢
2. é€‰æ‹©è¦æµ‹è¯•çš„ API æ–¹æ³•
3. é…ç½®å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰
4. å‘é€è¯·æ±‚å¹¶æŸ¥çœ‹ç»“æœ
5. ä½¿ç”¨é¢„è®¾æµ‹è¯•åŠŸèƒ½éªŒè¯å¤šä¸ª API

## å¿«æ·é”®

- `Ctrl + B`: åˆ‡æ¢ä¾§è¾¹æ æŠ˜å çŠ¶æ€

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## è®¸å¯è¯

MIT License

## ç›¸å…³é“¾æ¥

- [AnkiConnect å®˜æ–¹æ–‡æ¡£](https://github.com/FooSoft/anki-connect)
- [Element Plus ç»„ä»¶åº“](https://element-plus.org/)
- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [Vite æ–‡æ¡£](https://vitejs.dev/) 